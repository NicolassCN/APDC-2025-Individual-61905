{
    "info": {
        "_postman_id": "1234567890",
        "name": "APDC 2024 Individual Project",
        "description": "Collection for testing the APDC 2024 Individual Project API endpoints",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "OP1 - User Registration",
            "item": [
                {
                    "name": "Register Normal User",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"user@example.com\",\n    \"username\": \"normaluser\",\n    \"nome_completo\": \"Normal User Test\",\n    \"telefone\": \"+351912345678\",\n    \"password\": \"2024adcAVALind!!!\",\n    \"confirmar_password\": \"2024adcAVALind!!!\",\n    \"perfil\": \"publico\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/register",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "register"]
                        }
                    }
                },
                {
                    "name": "Register User with Optional Fields",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"complete@example.com\",\n    \"username\": \"completeuser\",\n    \"nome_completo\": \"Complete User Test\",\n    \"telefone\": \"+351923456789\",\n    \"password\": \"2024adcAVALind!!!\",\n    \"confirmar_password\": \"2024adcAVALind!!!\",\n    \"perfil\": \"privado\",\n    \"cartao_cidadao\": \"12345678\",\n    \"nif\": \"123456789\",\n    \"entidade_empregadora\": \"Smart Forest S.A.\",\n    \"funcao\": \"Técnico de Floresta\",\n    \"morada\": \"Rua dos alunos de APDC2324, No 100\",\n    \"nif_entidade_empregadora\": \"177888999\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/register",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "register"]
                        }
                    }
                },
                {
                    "name": "Register Invalid Password",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"test@example.com\",\n    \"username\": \"testuser\",\n    \"nome_completo\": \"Test User\",\n    \"telefone\": \"+351934567890\",\n    \"password\": \"weak\",\n    \"confirmar_password\": \"weak\",\n    \"perfil\": \"publico\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/register",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "register"]
                        }
                    }
                }
            ]
        },
        {
            "name": "OP2 - Login",
            "item": [
                {
                    "name": "Login with Username",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"identificador\": \"normaluser\",\n    \"password\": \"2024adcAVALind!!!\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/login",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "login"]
                        }
                    }
                },
                {
                    "name": "Login with Email",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"identificador\": \"user@example.com\",\n    \"password\": \"2024adcAVALind!!!\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/login",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "login"]
                        }
                    }
                },
                {
                    "name": "Login Root Admin",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"identificador\": \"root\",\n    \"password\": \"RootAdmin123!\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/login",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "login"]
                        }
                    }
                }
            ]
        },
        {
            "name": "OP3 - Change Role",
            "item": [
                {
                    "name": "Admin Changes User to Partner",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"username\": \"normaluser\",\n    \"novo_role\": \"PARTNER\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/change-role",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "change-role"]
                        }
                    }
                },
                {
                    "name": "Backoffice Changes Partner to User",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{backoffice_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"username\": \"normaluser\",\n    \"novo_role\": \"ENDUSER\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/change-role",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "change-role"]
                        }
                    }
                }
            ]
        },
        {
            "name": "OP4 - Change Account State",
            "item": [
                {
                    "name": "Admin Activates Account",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"username\": \"normaluser\",\n    \"novo_estado\": \"ATIVADA\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/change-account-state",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "change-account-state"]
                        }
                    }
                },
                {
                    "name": "Backoffice Deactivates Account",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{backoffice_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"username\": \"normaluser\",\n    \"novo_estado\": \"DESATIVADA\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/change-account-state",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "change-account-state"]
                        }
                    }
                }
            ]
        },
        {
            "name": "OP5 - Remove User Account",
            "item": [
                {
                    "name": "Admin Removes User by Email",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"user@example.com\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/remove",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "remove"]
                        }
                    }
                },
                {
                    "name": "Backoffice Removes Partner by Username",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{backoffice_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"username\": \"partneruser\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/remove",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "remove"]
                        }
                    }
                }
            ]
        },
        {
            "name": "OP6 - List Users",
            "item": [
                {
                    "name": "Admin Lists All Users",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/all",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "all"]
                        }
                    }
                },
                {
                    "name": "Backoffice Lists Users",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{backoffice_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/all",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "all"]
                        }
                    }
                },
                {
                    "name": "EndUser Lists Public Users",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{user_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/all",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "all"]
                        }
                    }
                }
            ]
        },
        {
            "name": "OP7 - Change Account Attributes",
            "item": [
                {
                    "name": "User Updates Own Attributes",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{user_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"identificador\": \"normaluser\",\n    \"atributos\": {\n        \"telefone\": \"+351987654321\",\n        \"morada\": \"Nova Morada, 123\"\n    }\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/change-attributes",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "change-attributes"]
                        }
                    }
                },
                {
                    "name": "Admin Updates Any User",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"identificador\": \"normaluser\",\n    \"atributos\": {\n        \"role\": \"PARTNER\",\n        \"estado\": \"ATIVADA\",\n        \"entidade_empregadora\": \"Nova Empresa S.A.\"\n    }\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/change-attributes",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "change-attributes"]
                        }
                    }
                }
            ]
        },
        {
            "name": "OP8 - Change Password",
            "item": [
                {
                    "name": "User Changes Password",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{user_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"senha_atual\": \"2024adcAVALind!!!\",\n    \"nova_senha\": \"NovaPassword2024!\",\n    \"confirmacao_senha\": \"NovaPassword2024!\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/change-password",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "change-password"]
                        }
                    }
                }
            ]
        },
        {
            "name": "OP9 - Logout",
            "item": [
                {
                    "name": "User Logout",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{user_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"token\": \"{{user_token}}\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/user/logout",
                            "host": ["{{base_url}}"],
                            "path": ["api", "user", "logout"]
                        }
                    }
                }
            ]
        },
        {
            "name": "OP10 - Work Sheet Management",
            "item": [
                {
                    "name": "Backoffice Creates Work Sheet",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{backoffice_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"referencia_obra\": \"O234/CM/2024\",\n    \"descricao\": \"Obra para reflorestação da propriedade P34567\",\n    \"tipo_alvo\": \"Propriedade Pública\",\n    \"estado_adjudicacao\": \"ADJUDICADO\",\n    \"data_adjudicacao\": \"2024-05-01\",\n    \"data_inicio_prevista\": \"2024-06-01\",\n    \"data_conclusao_prevista\": \"2024-12-01\",\n    \"conta_entidade\": \"partneruser\",\n    \"entidade_adjudicacao\": \"Reflorestação Inteligente S.A.\",\n    \"nif_empresa\": \"511876234\",\n    \"estado_obra\": \"NÃO INICIADO\",\n    \"observacoes\": \"Obra adjudicada, aguardando início\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/work-sheet/create",
                            "host": ["{{base_url}}"],
                            "path": ["api", "work-sheet", "create"]
                        }
                    }
                },
                {
                    "name": "Partner Updates Work Sheet Status",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{partner_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"referencia_obra\": \"O234/CM/2024\",\n    \"estado_obra\": \"EM CURSO\",\n    \"observacoes\": \"Obra iniciada conforme planejado\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/work-sheet/create",
                            "host": ["{{base_url}}"],
                            "path": ["api", "work-sheet", "create"]
                        }
                    }
                }
            ]
        }
    ],
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:8080"
        },
        {
            "key": "admin_token",
            "value": "your_admin_token_here"
        },
        {
            "key": "backoffice_token",
            "value": "your_backoffice_token_here"
        },
        {
            "key": "user_token",
            "value": "your_user_token_here"
        },
        {
            "key": "partner_token",
            "value": "your_partner_token_here"
        }
    ]
} 